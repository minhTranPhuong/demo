{"version":3,"sources":["../../../../assets/script/assets/script/card.js"],"names":["Emitter","require","COLOR","cc","Class","extends","Component","properties","lblCard","default","type","Label","_handleMoveUp","_handleMoveDown","_handleMoveLeft","_handleMoveRight","_handleDoneRandom","_action","animMove","_xOld","_yOld","onLoad","handleMoveUp","bind","handleMoveDown","handleMoveLeft","handleMoveRight","handleDoneRandom","instance","registerEvent","node","x","y","handleMove","selfCard","ortherCard","callBack","handleTween","tween","parallel","to","call","getComponent","start","handleMoveAnim","actionMove","moveTo","v2","actionCB","callFunc","action","sequence","setColorNumber","number","active","color","string","objCard","opacity","children","log","move","animMerge"],"mappings":";;;;;;AAAA,IAAMA,UAAUC,QAAQ,UAAR,CAAhB;AACA,IAAIC,QAAQD,QAAQ,OAAR,CAAZ;;AAEAE,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACRC,iBAAS;AACLC,qBAAS,IADJ;AAELC,kBAAMP,GAAGQ;AAFJ,SADD;AAKRC,uBAAe,IALP;AAMRC,yBAAiB,IANT;AAORC,yBAAiB,IAPT;AAQRC,0BAAkB,IARV;AASRC,2BAAmB,IATX;AAURC,iBAAS,IAVD;AAWRC,kBAAU,IAXF;AAYRC,eAAO,IAZC;AAaRC,eAAO;AAbC,KAHP;;AAmBLC,UAnBK,oBAmBI;AACL,aAAKT,aAAL,GAAqB,KAAKU,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAArB;AACA,aAAKV,eAAL,GAAuB,KAAKW,cAAL,CAAoBD,IAApB,CAAyB,IAAzB,CAAvB;AACA,aAAKT,eAAL,GAAuB,KAAKW,cAAL,CAAoBF,IAApB,CAAyB,IAAzB,CAAvB;AACA,aAAKR,gBAAL,GAAwB,KAAKW,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CAAxB;AACA,aAAKP,iBAAL,GAAyB,KAAKW,gBAAL,CAAsBJ,IAAtB,CAA2B,IAA3B,CAAzB;;AAEAvB,gBAAQ4B,QAAR,CAAiBC,aAAjB,CAA+B,QAA/B,EAAyC,KAAKjB,aAA9C;AACAZ,gBAAQ4B,QAAR,CAAiBC,aAAjB,CAA+B,UAA/B,EAA2C,KAAKhB,eAAhD;AACAb,gBAAQ4B,QAAR,CAAiBC,aAAjB,CAA+B,UAA/B,EAA2C,KAAKf,eAAhD;AACAd,gBAAQ4B,QAAR,CAAiBC,aAAjB,CAA+B,WAA/B,EAA4C,KAAKd,gBAAjD;AACA;AACA;AACA,YAAI,KAAKI,KAAL,IAAc,IAAd,IAAsB,KAAKC,KAAL,IAAc,IAAxC,EAA8C;AAC1C,iBAAKD,KAAL,GAAa,KAAKW,IAAL,CAAUC,CAAvB;AACA,iBAAKX,KAAL,GAAa,KAAKU,IAAL,CAAUE,CAAvB;AACH;AACDhC,gBAAQ4B,QAAR,CAAiBC,aAAjB,CAA+B,WAA/B,EAA4C,KAAKI,UAAjD;AACH,KArCI;AAuCLA,cAvCK,sBAuCMC,QAvCN,EAuCgBC,UAvChB,EAuC4BC,QAvC5B,EAuCsC;AACvC;AACA;AACA,YAAI,KAAKN,IAAL,IAAaI,QAAjB,EAA2B;AACvB,gBAAIH,IAAII,WAAWJ,CAAnB;AACA,gBAAIC,IAAIG,WAAWH,CAAnB;AACA,gBAAIK,cAAclC,GAAGmC,KAArB;AACAD,wBAAYH,QAAZ,EACKK,QADL,CAEQF,cAAcG,EAAd,CAAiB,CAAjB,EAAoB,EAAET,GAAGA,CAAL,EAAQC,GAAGA,CAAX,EAApB,CAFR,EAGQK,cAAcI,IAAd,CAAmBL,QAAnB,CAHR,EAKKI,EALL,CAKQ,CALR,EAKU,CALV,EAKY,EAACT,GAAGG,SAASQ,YAAT,CAAsB,MAAtB,EAA8BvB,KAAlC,EAA0Ca,GAAIE,SAASQ,YAAT,CAAsB,MAAtB,EAA8BtB,KAA5E,EALZ,EAMKuB,KANL;AAOH;AACJ,KAtDI;AAwDLC,kBAxDK,0BAwDUb,CAxDV,EAwDaC,CAxDb,EAwDgBI,QAxDhB,EAwD0B;AAC3B,YAAIS,aAAa1C,GAAG2C,MAAH,CAAU,CAAV,EAAa3C,GAAG4C,EAAH,CAAMhB,CAAN,EAASC,CAAT,CAAb,CAAjB;AACA,YAAIgB,WAAW7C,GAAG8C,QAAH,CAAYb,QAAZ,CAAf;AACA,YAAIc,SAAS/C,GAAGgD,QAAH,CAAYN,UAAZ,EAAwBG,QAAxB,CAAb;AACA,eAAOE,MAAP;AACH,KA7DI;AA+DLE,kBA/DK,0BA+DUC,MA/DV,EA+DkB;AACnB,YAAIA,UAAU,CAAd,EAAiB;AACb,iBAAK7C,OAAL,CAAasB,IAAb,CAAkBwB,MAAlB,GAA2B,KAA3B;AACA,iBAAKxB,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,CAAN,CAAlB;AACH,SAHD,MAIK;AACD,iBAAKM,OAAL,CAAagD,MAAb,GAAsBH,MAAtB;AACA,iBAAK7C,OAAL,CAAasB,IAAb,CAAkBwB,MAAlB,GAA2B,IAA3B;AACA,oBAAQD,MAAR;AACI,qBAAK,CAAL;AACI,yBAAKvB,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,CAAN,CAAlB;AACA;AACJ,qBAAK,CAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,CAAN,CAAlB;AACA;AACJ,qBAAK,CAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,CAAN,CAAlB;AACA;AACJ,qBAAK,EAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,EAAN,CAAlB;AACA;AACJ,qBAAK,EAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,EAAN,CAAlB;AACA;AACJ,qBAAK,EAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,EAAN,CAAlB;AACA;AACJ,qBAAK,GAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,GAAN,CAAlB;AACA;AACJ,qBAAK,GAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,GAAN,CAAlB;AACA;AACJ,qBAAK,GAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,GAAN,CAAlB;AACA;AACJ,qBAAK,IAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,IAAN,CAAlB;AACA;AACJ,qBAAK,IAAL;AACI,yBAAK4B,IAAL,CAAUyB,KAAV,GAAkBrD,MAAM,IAAN,CAAlB;AACA;;AAjCR;AAoCH;AACJ,KA5GI;AA8GLyB,oBA9GK,4BA8GY8B,OA9GZ,EA8GqB;AACtB;AACA,YAAIA,QAAQ1B,CAAR,IAAa,KAAKD,IAAL,CAAUC,CAAvB,IAA4B0B,QAAQzB,CAAR,IAAa,KAAKF,IAAL,CAAUE,CAAvD,EAA0D;AACtD,iBAAKF,IAAL,CAAU4B,OAAV,GAAoB,GAApB;AACA,iBAAK5B,IAAL,CAAU6B,QAAV,CAAmB,CAAnB,EAAsBjB,YAAtB,CAAmC,UAAnC,EAA+Cc,MAA/C,GAAwD,CAAxD;AACA,iBAAK1B,IAAL,CAAUyB,KAAV,GAAkB,IAAIpD,GAAGoD,KAAP,CAAa,GAAb,EAAkB,GAAlB,EAAuB,GAAvB,EAA4B,GAA5B,CAAlB;AACApD,eAAGyD,GAAH,CAAOH,OAAP;AACH;AACJ,KAtHI;AAwHLI,QAxHK,gBAwHA9B,CAxHA,EAwHGC,CAxHH,EAwHM;AACP;AACA;AACH,KA3HI;AA6HLV,gBA7HK,0BA6HU;AACX,aAAKuC,IAAL,CAAU,CAAV,EAAa,GAAb;AACH,KA/HI;AAiILrC,kBAjIK,4BAiIY;AACb,aAAKqC,IAAL,CAAU,CAAV,EAAa,CAAC,GAAd;AACH,KAnII;AAqILpC,kBArIK,4BAqIY;AACb,aAAKoC,IAAL,CAAU,CAAC,GAAX,EAAgB,CAAhB;AACH,KAvII;AAyILnC,mBAzIK,6BAyIa;AACd,aAAKmC,IAAL,CAAU,GAAV,EAAe,CAAf;AACH,KA3II;AA6ILC,aA7IK,uBA6IO,CAEX,CA/II;AAiJLnB,SAjJK,mBAiJG,CACP;AAlJI;;AAoJL;AApJJ","file":"card.js","sourceRoot":"../../../../assets/script","sourcesContent":["const Emitter = require('mEmitter');\nlet COLOR = require(\"color\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        lblCard: {\n            default: null,\n            type: cc.Label,\n        },\n        _handleMoveUp: null,\n        _handleMoveDown: null,\n        _handleMoveLeft: null,\n        _handleMoveRight: null,\n        _handleDoneRandom: null,\n        _action: null,\n        animMove: null,\n        _xOld: null,\n        _yOld: null,\n    },\n\n    onLoad() {\n        this._handleMoveUp = this.handleMoveUp.bind(this);\n        this._handleMoveDown = this.handleMoveDown.bind(this);\n        this._handleMoveLeft = this.handleMoveLeft.bind(this);\n        this._handleMoveRight = this.handleMoveRight.bind(this);\n        this._handleDoneRandom = this.handleDoneRandom.bind(this);\n\n        Emitter.instance.registerEvent(\"moveUp\", this._handleMoveUp);\n        Emitter.instance.registerEvent(\"moveDown\", this._handleMoveDown);\n        Emitter.instance.registerEvent(\"moveLeft\", this._handleMoveLeft);\n        Emitter.instance.registerEvent(\"moveRight\", this._handleMoveRight);\n        // Emitter.instance.registerEvent(\"doneRandom\",this._handleDoneRandom);\n        //Emitter.instance.registerEvent(\"move\", this.handleMove.bind(this));\n        if (this._xOld == null && this._yOld == null) {\n            this._xOld = this.node.x;\n            this._yOld = this.node.y;\n        }\n        Emitter.instance.registerEvent(\"moveRight\", this.handleMove);\n    },\n\n    handleMove(selfCard, ortherCard, callBack) {\n        //1: move tới position của ortherCard\n        //2: \n        if (this.node == selfCard) {\n            let x = ortherCard.x;\n            let y = ortherCard.y;\n            let handleTween = cc.tween;\n            handleTween(selfCard)\n                .parallel(\n                    handleTween().to(2, { x: x, y: y }),\n                    handleTween().call(callBack)\n                )\n                .to(0,5,{x: selfCard.getComponent(\"card\")._xOld , y : selfCard.getComponent(\"card\")._yOld})\n                .start();\n        }\n    },\n\n    handleMoveAnim(x, y, callBack) {\n        let actionMove = cc.moveTo(1, cc.v2(x, y));\n        let actionCB = cc.callFunc(callBack);\n        let action = cc.sequence(actionMove, actionCB);\n        return action;\n    },\n\n    setColorNumber(number) {\n        if (number == 0) {\n            this.lblCard.node.active = false;\n            this.node.color = COLOR[0];\n        }\n        else {\n            this.lblCard.string = number;\n            this.lblCard.node.active = true;\n            switch (number) {\n                case 2:\n                    this.node.color = COLOR[2];\n                    break;\n                case 4:\n                    this.node.color = COLOR[4];\n                    break;\n                case 8:\n                    this.node.color = COLOR[8];\n                    break;\n                case 16:\n                    this.node.color = COLOR[16];\n                    break;\n                case 32:\n                    this.node.color = COLOR[32];\n                    break;\n                case 64:\n                    this.node.color = COLOR[64];\n                    break;\n                case 128:\n                    this.node.color = COLOR[128];\n                    break;\n                case 256:\n                    this.node.color = COLOR[256];\n                    break;\n                case 512:\n                    this.node.color = COLOR[512];\n                    break;\n                case 1024:\n                    this.node.color = COLOR[1024];\n                    break;\n                case 2048:\n                    this.node.color = COLOR[2048];\n                    break;\n\n            }\n        }\n    },\n\n    handleDoneRandom(objCard) {\n        // cc.log(objCard)\n        if (objCard.x == this.node.x && objCard.y == this.node.y) {\n            this.node.opacity = 255;\n            this.node.children[0].getComponent('cc.Label').string = 2\n            this.node.color = new cc.color(235, 224, 213, 255);\n            cc.log(objCard)\n        }\n    },\n\n    move(x, y) {\n        // this._action =cc.moveBy(0,cc.v2(x,y));\n        // this.node.runAction(this._action);  \n    },\n\n    handleMoveUp() {\n        this.move(0, 150);\n    },\n\n    handleMoveDown() {\n        this.move(0, -150);\n    },\n\n    handleMoveLeft() {\n        this.move(-150, 0);\n    },\n\n    handleMoveRight() {\n        this.move(150, 0)\n    },\n\n    animMerge() {\n\n    },\n\n    start() {\n    },\n\n    // update (dt) {},\n});\n"]}