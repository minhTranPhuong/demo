{"version":3,"sources":["../../../../assets/script/assets/script/card.js"],"names":["Emitter","require","COLOR","cc","Class","extends","Component","properties","lblCard","default","type","Label","_handleMoveUp","_handleMoveDown","_handleMoveLeft","_handleMoveRight","_handleDoneRandom","_action","animMove","_xOld","_yOld","onLoad","handleMoveUp","bind","handleMoveDown","handleMoveLeft","handleMoveRight","handleDoneRandom","instance","registerEvent","handleMove","selfCard","ortherCard","callBack","node","x","y","handleTween","tween","parallel","to","call","getComponent","start","handleMoveAnim","actionMove","moveTo","v2","actionCB","callFunc","action","sequence","setColorNumber","number","active","color","string","objCard","opacity","children","log","move","animMerge","update","dt"],"mappings":"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","file":"card.js","sourceRoot":"../../../../assets/script","sourcesContent":["const Emitter = require('mEmitter');\nlet COLOR = require(\"color\");\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        lblCard: {\n            default: null,\n            type: cc.Label,\n        },\n        _handleMoveUp: null,\n        _handleMoveDown: null,\n        _handleMoveLeft: null,\n        _handleMoveRight: null,\n        _handleDoneRandom: null,\n        _action: null,\n        animMove: null,\n        _xOld: null,\n        _yOld: null,\n    },\n\n    onLoad() {\n        this._handleMoveUp = this.handleMoveUp.bind(this);\n        this._handleMoveDown = this.handleMoveDown.bind(this);\n        this._handleMoveLeft = this.handleMoveLeft.bind(this);\n        this._handleMoveRight = this.handleMoveRight.bind(this);\n        this._handleDoneRandom = this.handleDoneRandom.bind(this);\n\n        Emitter.instance.registerEvent(\"moveUp\", this._handleMoveUp);\n        Emitter.instance.registerEvent(\"moveDown\", this._handleMoveDown);\n        Emitter.instance.registerEvent(\"moveLeft\", this._handleMoveLeft);\n        Emitter.instance.registerEvent(\"moveRight\", this._handleMoveRight);\n        // Emitter.instance.registerEvent(\"doneRandom\",this._handleDoneRandom);\n        //Emitter.instance.registerEvent(\"move\", this.handleMove.bind(this));\n        Emitter.instance.registerEvent(\"moveRight\", this.handleMove);\n    },\n\n    handleMove(selfCard, ortherCard, callBack) {\n        if (this.node == selfCard) {\n            let x = ortherCard.x;\n            let y = ortherCard.y;\n            let handleTween = cc.tween;\n            handleTween(selfCard)\n                .parallel(\n                    handleTween().to(2, { x: x, y: y }),\n                    handleTween().call(callBack)\n                )\n                .to(0, 5, { x: selfCard.getComponent(\"card\")._xOld, y: selfCard.getComponent(\"card\")._yOld })\n                .start();\n        }\n    },\n\n    handleMoveAnim(x, y, callBack) {\n        let actionMove = cc.moveTo(1, cc.v2(x, y));\n        let actionCB = cc.callFunc(callBack);\n        let action = cc.sequence(actionMove, actionCB);\n        return action;\n    },\n\n    setColorNumber(number) {\n        if (number == 0) {\n            this.lblCard.node.active = false;\n            this.node.color = COLOR[0];\n        }\n        else {\n            this.lblCard.string = number;\n            this.lblCard.node.active = true;\n            switch (number) {\n                case 2:\n                    this.node.color = COLOR[2];\n                    break;\n                case 4:\n                    this.node.color = COLOR[4];\n                    break;\n                case 8:\n                    this.node.color = COLOR[8];\n                    break;\n                case 16:\n                    this.node.color = COLOR[16];\n                    break;\n                case 32:\n                    this.node.color = COLOR[32];\n                    break;\n                case 64:\n                    this.node.color = COLOR[64];\n                    break;\n                case 128:\n                    this.node.color = COLOR[128];\n                    break;\n                case 256:\n                    this.node.color = COLOR[256];\n                    break;\n                case 512:\n                    this.node.color = COLOR[512];\n                    break;\n                case 1024:\n                    this.node.color = COLOR[1024];\n                    break;\n                case 2048:\n                    this.node.color = COLOR[2048];\n                    break;\n\n            }\n        }\n    },\n\n    handleDoneRandom(objCard) {\n        // cc.log(objCard)\n        if (objCard.x == this.node.x && objCard.y == this.node.y) {\n            this.node.opacity = 255;\n            this.node.children[0].getComponent('cc.Label').string = 2\n            this.node.color = new cc.color(235, 224, 213, 255);\n            cc.log(objCard)\n        }\n    },\n\n    move(x, y) {\n        // this._action =cc.moveBy(0,cc.v2(x,y));\n        // this.node.runAction(this._action);  \n    },\n\n    handleMoveUp() {\n        this.move(0, 150);\n    },\n\n    handleMoveDown() {\n        this.move(0, -150);\n    },\n\n    handleMoveLeft() {\n        this.move(-150, 0);\n    },\n\n    handleMoveRight() {\n        this.move(150, 0)\n    },\n\n    animMerge() {\n\n    },\n\n    start() {\n        if (this._xOld == null && this._yOld == null) {\n            this._xOld = this.node.x;\n            this._yOld = this.node.y;\n        }\n    },\n    \n    update (dt) {\n        if(this.lblCard.string == \"0\"){\n            this.node.active = false\n        }\n    },\n});\n"]}